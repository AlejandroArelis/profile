import{a as J,b as K,c as P,d as U,e as y}from"./chunk-KCBB6BK3.js";import{a as W}from"./chunk-PRF5ZHG6.js";import{B as H,r as $,s as A,t as L,u as O,w as Q,x as B,y as q,z}from"./chunk-OMH7WZUU.js";import{m as R}from"./chunk-YR4DBCNH.js";import"./chunk-WXI33M2S.js";import{Ab as T,Bb as D,Cb as c,Db as M,Kb as C,Lb as j,Na as _,Oa as a,a as G,aa as g,db as V,fb as k,jb as I,ka as p,kc as x,la as f,lb as E,mb as F,nb as r,o as v,ob as o,pb as m,sb as w,vb as u,wb as h,zb as N}from"./chunk-3OB67NIV.js";import{f as S}from"./chunk-FO65GQC2.js";var te=["nameInput"],X=(()=>{let n=class n{constructor(e,t,i,l,b){this._dialogRef=e,this._formBuilder=t,this._service=i,this._toast=l,this.data=b,this.editing=!1,this.form=this._formBuilder.group({id:"",name:["",[A.required]]})}ngOnInit(){this.data&&(this.editing=!0,this.form.patchValue(this.data))}close(e){this._dialogRef.close(e)}submit(){return S(this,null,function*(){try{let e;this.editing?e=yield v(this._service.update(this.form.value)):e=yield v(this._service.new(this.form.value)),this.close(e)}catch(e){console.error(e),this._toast.error(e.error.detail),this.form.reset(),this.nameInput.nativeElement.focus()}})}};n.\u0275fac=function(t){return new(t||n)(a(J),a(z),a(y),a(W),a(K))},n.\u0275cmp=g({type:n,selectors:[["app-new"]],viewQuery:function(t,i){if(t&1&&N(te,5),t&2){let l;T(l=D())&&(i.nameInput=l.first)}},standalone:!0,features:[C],decls:19,vars:2,consts:[["nameInput",""],["data-bs-theme","dark",1,"blur"],[1,"row","m-0"],[1,"col","ps-0"],[1,"col-auto","pe-0"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"fa-solid","fa-xmark"],[1,"mt-2",3,"ngSubmit","formGroup"],[1,"form-floating"],["type","text","id","nameInput","placeholder","","formControlName","name",1,"form-control"],["for","nameInput"],[1,"d-flex","justify-content-end","mt-2"],["type","button",1,"btn","btn-sm","btn-danger","me-2",3,"click"],["type","submit",1,"btn","btn-sm","btn-success",3,"disabled"]],template:function(t,i){if(t&1){let l=w();r(0,"div",1)(1,"div",2)(2,"div",3)(3,"h1"),c(4,"Nuevo grupo de habilidades"),o()(),r(5,"div",4)(6,"button",5),u("click",function(){return p(l),f(i.close())}),m(7,"em",6),o()()(),r(8,"form",7),u("ngSubmit",function(){return p(l),f(i.submit())}),r(9,"div",8),m(10,"input",9,0),r(12,"label",10),c(13,"Nombre"),o()(),r(14,"div",11)(15,"button",12),u("click",function(){return p(l),f(i.close())}),c(16,"Cancelar"),o(),r(17,"button",13),c(18,"Guardar"),o()()()()}t&2&&(_(8),k("formGroup",i.form),_(9),k("disabled",i.form.invalid))},dependencies:[x,H,Q,$,L,O,B,q],encapsulation:2});let s=n;return s})();var ie=(s,n)=>n.id,ne=s=>["/skills",s];function re(s,n){if(s&1){let d=w();r(0,"button",11),m(1,"em",12),o(),r(2,"button",13),u("click",function(){p(d);let t=h().$implicit,i=h();return f(i.newSkillGroup(t))}),m(3,"em",14),o(),r(4,"button",15),u("click",function(){p(d);let t=h(),i=t.$implicit,l=t.$index,b=h();return f(b.delete(i.id,l))}),m(5,"em",16),o()}if(s&2){let d=h().$implicit;k("routerLink",j(1,ne,d.id))}}function oe(s,n){if(s&1&&(r(0,"tr")(1,"td"),c(2),o(),r(3,"td"),V(4,re,6,3),o()()),s&2){let d=n.$implicit;_(2),M(d.name),_(2),I(4,d.id?4:-1)}}var ke=(()=>{let n=class n{constructor(e,t){this._dialog=e,this._service=t,this.skillsGroups=[],this.skillsGroupsSubs=new G}ngOnInit(){this.skillsGroupsSubs=this._service.get().subscribe(e=>{this.skillsGroups=e})}newSkillGroup(e){this._dialog.open(X,{width:"50%",data:e}).afterClosed().subscribe(i=>{i&&this.skillsGroups.push(i)})}delete(e,t){return S(this,null,function*(){try{yield v(this._service.delete(e)),this.skillsGroups.splice(t,1)}catch(i){console.error(i)}})}ngOnDestroy(){this.skillsGroupsSubs.unsubscribe()}};n.\u0275fac=function(t){return new(t||n)(a(P),a(y))},n.\u0275cmp=g({type:n,selectors:[["app-skill-groups"]],standalone:!0,features:[C],decls:18,vars:0,consts:[["data-bs-theme","dark"],[1,"row","blur"],[1,"col","ps-0"],[1,"col-auto","pe-0"],[1,"btn","btn-success","btn-sm",3,"click"],[1,"fa-solid","fa-plus"],[1,"row","blur","mt-2"],[1,"table","table-sm","blur","m-0"],["scope","col"],[2,"width","111px"],[1,"table-group-divider"],[1,"btn","btn-sm","btn-warning","me-1",3,"routerLink"],[1,"fa-solid","fa-list"],[1,"btn","btn-sm","btn-primary","me-1",3,"click"],[1,"fa-solid","fa-pen"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"fa-solid","fa-trash"]],template:function(t,i){t&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),c(4,"Grupos de habilidades"),o()(),r(5,"div",3)(6,"button",4),u("click",function(){return i.newSkillGroup()}),m(7,"em",5),o()()(),r(8,"div",6)(9,"table",7)(10,"thead")(11,"tr")(12,"th",8),c(13,"Nombre"),o(),m(14,"th",9),o()(),r(15,"tbody",10),E(16,oe,5,2,"tr",null,ie),o()()()()),t&2&&(_(16),F(i.skillsGroups))},dependencies:[x,U,R],encapsulation:2});let s=n;return s})();export{ke as default};
